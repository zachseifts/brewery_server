{% extends "bootstrap_responsive.html" %}

{% block favicons %}
<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
{% endblock favicons %}

{% block body_content %}
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Temperatures!</a>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="span6">
      <table class="table">
        <tbody>
          <tr>
            <td>Currently</td>
            <td>{{ current }}</td>
          </tr>
          <tr>
            <td>Hourly average</td>
            <td>{{ average }}</td>
          </tr>
        </tbody>
      </table>
      <hr />
      <h2>30 minutes</h2>
      <div id="chart_half"></div>
      <h2>1 hour</h2>
      <div id="chart_hour"></div>
      <h2>24 hours</h2>
      <div id="chart_day"></div>
      <script type="text/javascript" src="https://www.google.com/jsapi"></script>
      <script type="text/javascript">
        google.load('visualization', '1.0', {'packages':['corechart']});
        google.setOnLoadCallback(drawChart);

        function drawChart() {
          var data = google.visualization.arrayToDataTable([
            ['created', 'temp (F)'],
            {% for entry in half %}
            ['{{ entry.created }}', {{ entry.temp }}],
            {% endfor %}
          ]);
          var options = {
          };
          var chart = new google.visualization.LineChart(document.getElementById('chart_half'));
          chart.draw(data, options);

          var data = google.visualization.arrayToDataTable([
            ['created', 'temp (F)'],
            {% for entry in hour %}
            ['{{ entry.created }}', {{ entry.temp }}],
            {% endfor %}
          ]);
          var options = {
          };
          var chart = new google.visualization.LineChart(document.getElementById('chart_hour'));
          chart.draw(data, options);

          var data = google.visualization.arrayToDataTable([
            ['created', 'temp (F)'],
            {% for entry in day %}
            ['{{ entry.created }}', {{ entry.temp }}],
            {% endfor %}
          ]);
          var options = {
          };
          var chart = new google.visualization.LineChart(document.getElementById('chart_day'));
          chart.draw(data, options);
        }
      </script>
    </div>

    <div class="span6">
      <h2>Last hour</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <td>Temp (F)</td>
            <td>Temp (C)</td>
            <td>Key</td>
            <td>Created</td>
          </tr>
        </thead>
        <tbody>
          {% for entry in day | reverse %}
          <tr>
            <td>{{ entry.temp }}</td>
            <td>{{ entry.c }}</td>
            <td>{{ entry.key }}</td>
            <td>{{ entry.created }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <footer>
    <p><i class="icon-camera-retro"></i> footer stuff</p>
  </footer>
</div>


{% endblock %}
